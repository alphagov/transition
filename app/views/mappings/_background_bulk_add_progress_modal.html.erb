<div class="modal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-module="auto-show-modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <header class="modal-header">
        <h3 class="modal-title">
          Adding mappings
        </h3>
      </header>
      <div class="modal-body remove-bottom-padding">
        <div class="large-and-spaced" style="padding: 20px 0 60px">
          <%= image_tag('ajax_loader_gray_350.gif', size: '24x24', class: 'add-right-margin', style: 'margin-top: -4px')%>
          <span id="message">Waiting&hellip;</span>
          <div class="add-top-margin progress" style="margin: 0 40px">
            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
              <span class="percent-done">0</span>%
            </div>
          </div>
        </div>
          <script>
            var url = "<%= site_batch_path(site, batch) %>";
            var message = $('#message'),
                percentDone = $('.percent-done'),
                bar = $('.progress-bar');

            setInterval(function() {
              $.ajax({
                url: url,
                success: function(data) {
                  percent = (data.done/data.total * 100).toFixed(0);

                  message.text(data.done + " of " + data.total + " mappings added");
                  percentDone.text(percent);
                  bar.css('width', percent + '%');
                }
              });
            }, 1000);
          </script>
          <p class="well">You may leave this page at any time and Transition will continue to add your mappings in the background.</p>
      </div>
    </div>
  </div>
</div>
